\hypertarget{Animation__Manager_8h_source}{}\doxysection{Animation\+\_\+\+Manager.\+h}
\label{Animation__Manager_8h_source}\index{utility/Animation\_Manager.h@{utility/Animation\_Manager.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{//}}
\DoxyCodeLine{2 \textcolor{comment}{// Created by albin on 2022-\/12-\/07.}}
\DoxyCodeLine{3 \textcolor{comment}{//}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#ifndef TDP005\_ANIMATION\_MANAGER\_H}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define TDP005\_ANIMATION\_MANAGER\_H}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}common.h"{}}}
\DoxyCodeLine{9 }
\DoxyCodeLine{13 \textcolor{keyword}{class }\mbox{\hyperlink{classAnimation__Manager}{Animation\_Manager}} \{}
\DoxyCodeLine{14 \textcolor{keyword}{public}:}
\DoxyCodeLine{15     \mbox{\hyperlink{classAnimation__Manager}{Animation\_Manager}}();}
\DoxyCodeLine{16     \mbox{\hyperlink{classAnimation__Manager}{\string~Animation\_Manager}}();}
\DoxyCodeLine{17 }
\DoxyCodeLine{24     \textcolor{keywordtype}{void} \mbox{\hyperlink{classAnimation__Manager_a2f6e8a90fcee3a11c0ee243722fcf6de}{play}}(std::string \textcolor{keyword}{const}\& key, \mbox{\hyperlink{classsf_1_1Sprite}{sf::Sprite}}\& sprite, \textcolor{keywordtype}{bool} priority = \textcolor{keyword}{false});}
\DoxyCodeLine{25 }
\DoxyCodeLine{33     \textcolor{keywordtype}{void} \mbox{\hyperlink{classAnimation__Manager_afb1459c5692613daf5c03c18ecea160e}{add\_animation}}(std::string \textcolor{keyword}{const}\& key, \mbox{\hyperlink{classsf_1_1Texture}{sf::Texture}}* texture, \textcolor{keywordtype}{int} image\_count, \textcolor{keywordtype}{float} total\_time);}
\DoxyCodeLine{34 }
\DoxyCodeLine{40     \textcolor{keywordtype}{bool} \textcolor{keyword}{const}\& \mbox{\hyperlink{classAnimation__Manager_a327fde1467aad47f67cc8e2ae7a92f0b}{is\_done}}(std::string \textcolor{keyword}{const}\& key);}
\DoxyCodeLine{41 }
\DoxyCodeLine{45     \textcolor{keywordtype}{void} \mbox{\hyperlink{classAnimation__Manager_ab66873eb73625d0780156eff9e7eb414}{kill}}();}
\DoxyCodeLine{46 }
\DoxyCodeLine{52     \textcolor{keywordtype}{void} \mbox{\hyperlink{classAnimation__Manager_a49b4f760b370bec9bdfdd5debbba89f7}{force\_play}}(std::string \textcolor{keyword}{const}\& key, \mbox{\hyperlink{classsf_1_1Sprite}{sf::Sprite}}\& sprite);}
\DoxyCodeLine{53 }
\DoxyCodeLine{54 \textcolor{keyword}{private}:}
\DoxyCodeLine{58     \textcolor{keyword}{class }\mbox{\hyperlink{classAnimation__Manager_1_1Animation}{Animation}} \{}
\DoxyCodeLine{59     \textcolor{keyword}{public}:}
\DoxyCodeLine{66         \mbox{\hyperlink{classAnimation__Manager_1_1Animation_af33919d8a91426f59828442bbf1aa672}{Animation}}(\mbox{\hyperlink{classsf_1_1Texture}{sf::Texture}}* texture, \textcolor{keywordtype}{int} image\_count, \textcolor{keywordtype}{float} total\_time)}
\DoxyCodeLine{67                 : texture\{texture\}, TOTAL\_TIME\{total\_time\}, current\_frame\{0\}, current\_time\{0\}, done\{false\} \{}
\DoxyCodeLine{68 }
\DoxyCodeLine{69             \mbox{\hyperlink{classsf_1_1Vector2}{sf::Vector2u}} sprite\_size;}
\DoxyCodeLine{70 }
\DoxyCodeLine{71             sprite\_size.\mbox{\hyperlink{classsf_1_1Vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}} = texture-\/>\mbox{\hyperlink{classsf_1_1Texture_a9f86b8cc670c6399c539d4ce07ae5c8a}{getSize}}().\mbox{\hyperlink{classsf_1_1Vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}} / image\_count;}
\DoxyCodeLine{72             sprite\_size.\mbox{\hyperlink{classsf_1_1Vector2_a420f2481b015f4eb929c75f2af564299}{y}} = texture-\/>\mbox{\hyperlink{classsf_1_1Texture_a9f86b8cc670c6399c539d4ce07ae5c8a}{getSize}}().\mbox{\hyperlink{classsf_1_1Vector2_a420f2481b015f4eb929c75f2af564299}{y}};}
\DoxyCodeLine{73 }
\DoxyCodeLine{74             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < image\_count; ++i) \{}
\DoxyCodeLine{75                 frames.emplace\_back(}
\DoxyCodeLine{76                         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(sprite\_size.\mbox{\hyperlink{classsf_1_1Vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}} * i),}
\DoxyCodeLine{77                         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(0),}
\DoxyCodeLine{78                         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(sprite\_size.\mbox{\hyperlink{classsf_1_1Vector2_a1e6ad77fa155f3753bfb92699bd28141}{x}}),}
\DoxyCodeLine{79                         \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(sprite\_size.\mbox{\hyperlink{classsf_1_1Vector2_a420f2481b015f4eb929c75f2af564299}{y}}));}
\DoxyCodeLine{80             \}}
\DoxyCodeLine{81         \}}
\DoxyCodeLine{82 }
\DoxyCodeLine{83         \mbox{\hyperlink{classAnimation__Manager_1_1Animation}{\string~Animation}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{84 }
\DoxyCodeLine{90         \textcolor{keywordtype}{bool} \textcolor{keyword}{const}\& \mbox{\hyperlink{classAnimation__Manager_1_1Animation_a22d179ce4f1e693f71549cf8375d9150}{update}}(\mbox{\hyperlink{classsf_1_1Sprite}{sf::Sprite}}\& sprite) \{}
\DoxyCodeLine{91             current\_time = clock.\mbox{\hyperlink{classsf_1_1Clock_abe889b42a65bcd8eefc16419645d08a7}{getElapsedTime}}().\mbox{\hyperlink{classsf_1_1Time_aa3df2f992d0b0041b4eb02258d43f0e3}{asSeconds}}();}
\DoxyCodeLine{92             done = \textcolor{keyword}{false};}
\DoxyCodeLine{93             \textcolor{keywordflow}{if} (current\_time >= TOTAL\_TIME) \{}
\DoxyCodeLine{94                 current\_time -\/= TOTAL\_TIME;}
\DoxyCodeLine{95                 clock.\mbox{\hyperlink{classsf_1_1Clock_a123e2627f2943e5ecaa1db0c7df3231b}{restart}}();}
\DoxyCodeLine{96                 \textcolor{keywordflow}{if} (++current\_frame >= frames.size()) \{}
\DoxyCodeLine{97                     current\_frame = 0;}
\DoxyCodeLine{98                     done = \textcolor{keyword}{true};}
\DoxyCodeLine{99                 \}}
\DoxyCodeLine{100             \}}
\DoxyCodeLine{101 }
\DoxyCodeLine{102             sprite.\mbox{\hyperlink{classsf_1_1Sprite_a3729c88d88ac38c19317c18e87242560}{setTexture}}(*texture, \textcolor{keyword}{true});}
\DoxyCodeLine{103             sprite.\mbox{\hyperlink{classsf_1_1Sprite_a3fefec419a4e6a90c0fd54c793d82ec2}{setTextureRect}}(frames[current\_frame]);}
\DoxyCodeLine{104 }
\DoxyCodeLine{105             \textcolor{keywordflow}{return} done;}
\DoxyCodeLine{106         \}}
\DoxyCodeLine{107 }
\DoxyCodeLine{111         \textcolor{keywordtype}{void} \mbox{\hyperlink{classAnimation__Manager_1_1Animation_a6098218e84f080de4ab572cb87533da0}{reset}}() \{}
\DoxyCodeLine{112             current\_frame = 0;}
\DoxyCodeLine{113         \}}
\DoxyCodeLine{114 }
\DoxyCodeLine{115         \mbox{\hyperlink{classsf_1_1Texture}{sf::Texture}}* texture;}
\DoxyCodeLine{116         std::vector<sf::IntRect> frames;}
\DoxyCodeLine{117 }
\DoxyCodeLine{118         \textcolor{keywordtype}{int} current\_frame;}
\DoxyCodeLine{119         \textcolor{keywordtype}{float} current\_time;}
\DoxyCodeLine{120         \textcolor{keywordtype}{bool} done;}
\DoxyCodeLine{121 }
\DoxyCodeLine{122         \mbox{\hyperlink{classsf_1_1Clock}{sf::Clock}} clock;}
\DoxyCodeLine{123 }
\DoxyCodeLine{124         \textcolor{keywordtype}{float} TOTAL\_TIME;}
\DoxyCodeLine{125     \};}
\DoxyCodeLine{126 }
\DoxyCodeLine{127     std::map<std::string, Animation*> animations;}
\DoxyCodeLine{128     Animation* last\_animation;}
\DoxyCodeLine{129     Animation* priority\_animation;}
\DoxyCodeLine{130 \};}
\DoxyCodeLine{131 }
\DoxyCodeLine{132 }
\DoxyCodeLine{133 \textcolor{preprocessor}{\#endif }\textcolor{comment}{//TDP005\_ANIMATION\_MANAGER\_H}}

\end{DoxyCode}
